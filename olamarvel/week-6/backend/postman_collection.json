{
	"info": {
		"_postman_id": "a8c1b3f0-a1b2-4c3d-8e9f-a0b1c2d3e4f5",
		"name": "FlowServe API",
		"description": "Comprehensive API collection for the FlowServe application, a fintech service for processing real-time transactions and digital wallet operations.\\n\\n**Environment Variables:**\\n- `baseUrl`: The base URL of your backend API (e.g., `http://localhost:5000`)\\n- `authToken`: Automatically set after a successful login to be used for protected routes.\\n\\n**Usage:**\\n1. Set `baseUrl` in your Postman environment.\\n2. Run the `Login User` request to get an `authToken`.\\n3. The `refreshToken` is handled automatically via cookies.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"description": "Handles user registration, login, and token management.",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Jane Doe\",\n  \"email\": \"jane.doe@example.com\",\n  \"password\": \"aStrongPassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "**Route:** `POST /api/auth/register`\\n\\n**Description:** Registers a new user.\\n\\n**Validation (Zod):**\\n- `name`: `string`, required.\\n- `email`: `string`, required, valid email format.\\n- `password`: `string`, required, min 8, max 20 characters.\\n\\n**Controller Logic (`Auth.register`):**\\n1. Validates request body using Zod schema.\\n2. Hashes password.\\n3. Checks for existing user.\\n4. Creates a new `User` in the PostgreSQL database."
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.success && jsonData.token) {",
									"    pm.environment.set(\"authToken\", jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"jane.doe@example.com\",\n  \"password\": \"aStrongPassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "**Route:** `POST /api/auth/login`\\n\\n**Description:** Logs in a user, returning an Access Token and setting a `refreshToken` cookie. The Access Token is saved to the `authToken` environment variable.\\n\\n**Controller Logic (`Auth.login`):**\\n1. Validates request body.\\n2. Verifies user credentials.\\n3. Generates JWT Access and Refresh Tokens.\\n4. Saves the refresh token's JTI to the `RefreshToken` table in the database.\\n5. Sets the `refreshToken` as an `httpOnly` cookie."
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/getUser",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"getUser"
							]
						},
						"description": "**Route:** `GET /api/auth/getUser`\\n\\n**Description:** Retrieves the profile details (including balance) of the currently authenticated user.\\n\\n**Authentication:** Requires a valid Access Token in the `Authorization: Bearer <token>` header."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						},
						"description": "**Route:** `POST /api/auth/refresh`\\n\\n**Description:** Uses the `refreshToken` (sent automatically as a cookie) to generate a new Access Token.\\n\\n**Note:** For this to work in Postman, you must ensure cookies are enabled and have been set by a previous `Login` request from the Postman client."
					},
					"response": []
				},
				{
					"name": "Logout User",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						},
						"description": "**Route:** `POST /api/auth/logout`\\n\\n**Description:** Logs out the user by clearing the `refreshToken` cookie and deleting the token's JTI from the database, invalidating the session."
					},
					"response": []
				}
			]
		},
		{
			"name": "Transactions",
			"description": "Handles user balance, fund transfers, and statements. All routes require authentication.",
			"item": [
				{
					"name": "Get Balance",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/transactions/balance",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"transactions",
								"balance"
							]
						},
						"description": "**Route:** `GET /api/transactions/balance`\\n\\n**Description:** Retrieves the current balance for the authenticated user."
					},
					"response": []
				},
				{
					"name": "Deposit Funds",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 100.50\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/transactions/deposit",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"transactions",
								"deposit"
							]
						},
						"description": "**Route:** `POST /api/transactions/deposit`\\n\\n**Description:** Adds funds to the user's own account. Creates a `Transaction` record with type `DEPOSIT`.\\n\\n**Validation (Zod):**\\n-`amount`: `number`, must be positive."
					},
					"response": []
				},
				{
					"name": "Send Funds",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"recipientEmail\": \"receiver@example.com\",\n    \"amount\": 50\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/transactions/send",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"transactions",
								"send"
							]
						},
						"description": "**Route:** `POST /api/transactions/send`\\n\\n**Description:** Sends funds from the authenticated user to a recipient. This is an atomic operation that updates both user balances and creates a `Transaction` record.\\n\\n**Validation (Zod):**\\n-`recipientEmail`: `string`, must be a valid email.\\n-`amount`: `number`, must be positive."
					},
					"response": []
				},
				{
					"name": "Get Statement",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/transactions/statement?page=1&pagesize=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"transactions",
								"statement"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pagesize",
									"value": "10"
								}
							]
						},
						"description": "**Route:** `GET /api/transactions/statement`\\n\\n**Description:** Retrieves a paginated history of transactions for the authenticated user (both sent and received).\\n\\n**Query Parameters:**\\n-`page`: (Optional) The page number to retrieve. Defaults to 1.\\n-`pagesize`: (Optional) The number of transactions per page. Defaults to 10."
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000"
		},
		{
			"key": "authToken",
			"value": ""
		}
	]
}
